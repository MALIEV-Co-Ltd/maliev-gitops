apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: maliev-services-monitor
  namespace: monitoring
  labels:
    app: maliev-services
spec:
  selector:
    matchLabels:
      monitor: "true"
  endpoints:
  - port: http
    path: /auth/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /materials/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /countries/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /currencies/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /customers/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /employees/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /invoices/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /messages/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /orders/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /orderstatus/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /payments/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /pdf/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /predictions/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /purchaseorders/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /quotationrequests/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /quotations/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /receipts/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /suppliers/metrics
    interval: 30s
    targetPort: 8080
  - port: http
    path: /upload/metrics
    interval: 30s
    targetPort: 8080
  namespaceSelector:
    matchNames:
    - maliev-dev
    - maliev-staging
    - maliev-prod
---
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: maliev-line-chatbot-monitor
  namespace: monitoring
  labels:
    app: maliev-line-chatbot
spec:
  selector:
    matchLabels:
      app: maliev-line-chatbot
  endpoints:
  - port: http
    path: /metrics
    interval: 30s
    targetPort: 8000
  namespaceSelector:
    matchNames:
    - maliev-dev
    - maliev-staging
    - maliev-prod